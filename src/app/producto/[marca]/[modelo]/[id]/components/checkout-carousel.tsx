'use client';

import Box from '@mui/material/Box';
import IconButton from '@mui/material/IconButton';
import Typography from '@mui/material/Typography';

import { Carousel, useCarousel, CarouselDotButtons } from 'src/components/carousel';

// ----------------------------------------------------------------------

type CheckoutCarouselProps = {
  images: string[];
};

export function CheckoutCarousel({ images }: CheckoutCarouselProps) {
  const carousel = useCarousel({
    loop: true,
    slidesToShow: 1,
    slideSpacing: '0px',
  });

  return (
    <Box sx={{ position: 'relative' }}>
      {/* Carrusel de imágenes */}
      <Box
        sx={{
          position: 'relative',
          borderRadius: '15px',
          overflow: 'hidden',
          width: { xs: '100%', md: '100%' },
          height: { xs: '300px', md: '620px' },
        }}
      >
        <Carousel carousel={carousel}>
          {images.map((image, index) => (
            <Box
              key={index}
              sx={{
                width: '100%',
                height: { xs: '300px', md: '620px' },
                position: 'relative',
              }}
            >
              <Box
                component="img"
                src={image}
                alt={`Imagen ${index + 1}`}
                sx={{
                  width: '100%',
                  height: '100%',
                  objectFit: 'cover',
                }}
              />
            </Box>
          ))}
        </Carousel>

        {/* Chips flotantes - Esquina inferior izquierda */}
        <Box
          sx={{
            position: 'absolute',
            bottom: 16,
            left: 16,
            zIndex: 2,
            display: 'flex',
            flexDirection: 'column',
            gap: 1,
          }}
        >
          {/* Box de Delivery gratis */}
          <Box
            sx={{
              display: 'flex',
              alignItems: 'center',
              gap: 1,
              bgcolor: 'rgba(255, 255, 255, 0.2)',
              backdropFilter: 'blur(10px)',
              color: 'white',
              fontWeight: 600,
              fontSize: '14px',
              height: 40,
              px: 2,
              borderRadius: '20px',
              border: '1px solid rgba(255, 255, 255, 0.3)',
            }}
          >
            <Box
              component="svg"
              xmlns="http://www.w3.org/2000/svg"
              width="22px"
              height="22px"
              viewBox="0 0 22 22"
              fill="none"
            >
              <path
                d="M2.75 11H11V12.375H2.75V11ZM1.375 7.5625H8.25V8.9375H1.375V7.5625Z"
                fill="white"
              />
              <path
                d="M20.5693 11.4166L18.5068 6.60413C18.4538 6.48048 18.3657 6.37511 18.2534 6.30105C18.1411 6.227 18.0095 6.18751 17.875 6.1875H15.8125V4.8125C15.8125 4.63016 15.7401 4.4553 15.6111 4.32636C15.4822 4.19743 15.3073 4.125 15.125 4.125H4.12499V5.5H14.4375V14.1322C14.1244 14.3144 13.8504 14.5566 13.6312 14.8449C13.412 15.1333 13.2519 15.4621 13.1601 15.8125H8.83986C8.67253 15.1644 8.27458 14.5996 7.72061 14.224C7.16663 13.8483 6.49467 13.6876 5.83067 13.7719C5.16668 13.8563 4.55623 14.1799 4.11376 14.6821C3.6713 15.1843 3.42719 15.8307 3.42719 16.5C3.42719 17.1693 3.6713 17.8157 4.11376 18.3179C4.55623 18.8201 5.16668 19.1437 5.83067 19.2281C6.49467 19.3124 7.16663 19.1517 7.72061 18.776C8.27458 18.4004 8.67253 17.8356 8.83986 17.1875H13.1601C13.3097 17.7775 13.6517 18.3009 14.1321 18.6747C14.6125 19.0485 15.2038 19.2515 15.8125 19.2515C16.4212 19.2515 17.0125 19.0485 17.4929 18.6747C17.9733 18.3009 18.3153 17.7775 18.4649 17.1875H19.9375C20.1198 17.1875 20.2947 17.1151 20.4236 16.9861C20.5526 16.8572 20.625 16.6823 20.625 16.5V11.6875C20.625 11.5944 20.606 11.5022 20.5693 11.4166ZM6.18749 17.875C5.91554 17.875 5.64969 17.7944 5.42358 17.6433C5.19746 17.4922 5.02122 17.2774 4.91715 17.0262C4.81308 16.7749 4.78585 16.4985 4.83891 16.2318C4.89196 15.965 5.02292 15.72 5.21521 15.5277C5.40751 15.3354 5.65251 15.2045 5.91924 15.1514C6.18596 15.0984 6.46243 15.1256 6.71368 15.2297C6.96492 15.3337 7.17967 15.51 7.33076 15.7361C7.48184 15.9622 7.56249 16.2281 7.56249 16.5C7.56249 16.8647 7.41762 17.2144 7.15976 17.4723C6.9019 17.7301 6.55216 17.875 6.18749 17.875ZM15.8125 7.5625H17.4212L18.8952 11H15.8125V7.5625ZM15.8125 17.875C15.5405 17.875 15.2747 17.7944 15.0486 17.6433C14.8225 17.4922 14.6462 17.2774 14.5422 17.0262C14.4381 16.7749 14.4109 16.4985 14.4639 16.2318C14.517 15.965 14.6479 15.72 14.8402 15.5277C15.0325 15.3354 15.2775 15.2045 15.5442 15.1514C15.811 15.0984 16.0874 15.1256 16.3387 15.2297C16.5899 15.3337 16.8047 15.51 16.9558 15.7361C17.1068 15.9622 17.1875 16.2281 17.1875 16.5C17.1875 16.8647 17.0426 17.2144 16.7848 17.4723C16.5269 17.7301 16.1772 17.875 15.8125 17.875ZM19.25 15.8125H18.4649C18.3134 15.2236 17.9708 14.7016 17.4908 14.3284C17.0108 13.9551 16.4205 13.7517 15.8125 13.75V12.375H19.25V15.8125Z"
                fill="white"
              />
            </Box>
            <Typography sx={{ fontSize: '14px', fontWeight: 600, color: 'white' }}>
              Delivery gratis
            </Typography>
          </Box>

          {/* Box de 30 días de garantía */}
          <Box
            sx={{
              display: 'flex',
              alignItems: 'center',
              gap: 1,
              bgcolor: 'rgba(255, 255, 255, 0.2)',
              backdropFilter: 'blur(10px)',
              color: 'white',
              fontWeight: 600,
              fontSize: '14px',
              height: 40,
              px: 2,
              borderRadius: '20px',
              border: '1px solid rgba(255, 255, 255, 0.3)',
            }}
          >
            <Box
              component="svg"
              xmlns="http://www.w3.org/2000/svg"
              width="23px"
              height="23px"
              viewBox="0 0 23 23"
              fill="none"
            >
              <path
                d="M21.5481 8.91455C21.161 8.51 20.7606 8.09312 20.6096 7.72656C20.47 7.3908 20.4618 6.83429 20.4536 6.29522C20.4382 5.29308 20.4217 4.15745 19.6321 3.36786C18.8425 2.57826 17.7069 2.56183 16.7048 2.54643C16.1657 2.53821 15.6092 2.53 15.2734 2.39036C14.9079 2.23942 14.49 1.83897 14.0854 1.45187C13.377 0.771116 12.572 0 11.5 0C10.428 0 9.62406 0.771116 8.91455 1.45187C8.51 1.83897 8.09312 2.23942 7.72656 2.39036C7.39286 2.53 6.83429 2.53821 6.29522 2.54643C5.29308 2.56183 4.15745 2.57826 3.36786 3.36786C2.57826 4.15745 2.56696 5.29308 2.54643 6.29522C2.53821 6.83429 2.53 7.3908 2.39036 7.72656C2.23942 8.0921 1.83897 8.51 1.45187 8.91455C0.771116 9.62304 0 10.428 0 11.5C0 12.572 0.771116 13.3759 1.45187 14.0854C1.83897 14.49 2.23942 14.9069 2.39036 15.2734C2.53 15.6092 2.53821 16.1657 2.54643 16.7048C2.56183 17.7069 2.57826 18.8425 3.36786 19.6321C4.15745 20.4217 5.29308 20.4382 6.29522 20.4536C6.83429 20.4618 7.3908 20.47 7.72656 20.6096C8.0921 20.7606 8.51 21.161 8.91455 21.5481C9.62304 22.2289 10.428 23 11.5 23C12.572 23 13.3759 22.2289 14.0854 21.5481C14.49 21.161 14.9069 20.7606 15.2734 20.6096C15.6092 20.47 16.1657 20.4618 16.7048 20.4536C17.7069 20.4382 18.8425 20.4217 19.6321 19.6321C20.4217 18.8425 20.4382 17.7069 20.4536 16.7048C20.4618 16.1657 20.47 15.6092 20.6096 15.2734C20.7606 14.9079 21.161 14.49 21.5481 14.0854C22.2289 13.377 23 12.572 23 11.5C23 10.428 22.2289 9.62406 21.5481 8.91455ZM20.3622 12.9488C19.8704 13.4622 19.3611 13.993 19.091 14.645C18.8323 15.2714 18.821 15.9871 18.8107 16.6801C18.8004 17.3989 18.7892 18.1515 18.4698 18.4698C18.1505 18.7881 17.403 18.8004 16.6801 18.8107C15.9871 18.821 15.2714 18.8323 14.645 19.091C13.993 19.3611 13.4622 19.8704 12.9488 20.3622C12.4354 20.854 11.9107 21.3571 11.5 21.3571C11.0893 21.3571 10.5605 20.852 10.0512 20.3622C9.54192 19.8724 9.00696 19.3611 8.35496 19.091C7.72862 18.8323 7.01295 18.821 6.31987 18.8107C5.60112 18.8004 4.84848 18.7892 4.53018 18.4698C4.21187 18.1505 4.19955 17.403 4.18929 16.6801C4.17902 15.9871 4.16772 15.2714 3.90897 14.645C3.63893 13.993 3.12964 13.4622 2.63781 12.9488C2.14598 12.4354 1.64286 11.9107 1.64286 11.5C1.64286 11.0893 2.14804 10.5605 2.63781 10.0512C3.12759 9.54192 3.63893 9.00696 3.90897 8.35496C4.16772 7.72862 4.17902 7.01295 4.18929 6.31987C4.19955 5.60112 4.21085 4.84848 4.53018 4.53018C4.84951 4.21187 5.59701 4.19955 6.31987 4.18929C7.01295 4.17902 7.72862 4.16772 8.35496 3.90897C9.00696 3.63893 9.53781 3.12964 10.0512 2.63781C10.5646 2.14598 11.0893 1.64286 11.5 1.64286C11.9107 1.64286 12.4395 2.14804 12.9488 2.63781C13.4581 3.12759 13.993 3.63893 14.645 3.90897C15.2714 4.16772 15.9871 4.17902 16.6801 4.18929C17.3989 4.19955 18.1515 4.21085 18.4698 4.53018C18.7881 4.84951 18.8004 5.59701 18.8107 6.31987C18.821 7.01295 18.8323 7.72862 19.091 8.35496C19.3611 9.00696 19.8704 9.53781 20.3622 10.0512C20.854 10.5646 21.3571 11.0893 21.3571 11.5C21.3571 11.9107 20.852 12.4395 20.3622 12.9488ZM16.1883 8.45455C16.2647 8.53084 16.3253 8.62144 16.3666 8.72116C16.4079 8.82088 16.4292 8.92777 16.4292 9.03571C16.4292 9.14366 16.4079 9.25055 16.3666 9.35027C16.3253 9.44999 16.2647 9.54059 16.1883 9.61688L10.4383 15.3669C10.362 15.4432 10.2714 15.5038 10.1717 15.5452C10.072 15.5865 9.96509 15.6078 9.85714 15.6078C9.74919 15.6078 9.6423 15.5865 9.54258 15.5452C9.44286 15.5038 9.35227 15.4432 9.27598 15.3669L6.8117 12.9026C6.65756 12.7485 6.57097 12.5394 6.57097 12.3214C6.57097 12.1035 6.65756 11.8944 6.8117 11.7403C6.96583 11.5861 7.17488 11.4995 7.39286 11.4995C7.61083 11.4995 7.81988 11.5861 7.97402 11.7403L9.85714 13.6244L15.026 8.45455C15.1023 8.37818 15.1929 8.31759 15.2926 8.27625C15.3923 8.23492 15.4992 8.21364 15.6071 8.21364C15.7151 8.21364 15.822 8.23492 15.9217 8.27625C16.0214 8.31759 16.112 8.37818 16.1883 8.45455Z"
                fill="white"
              />
            </Box>
            <Typography sx={{ fontSize: '14px', fontWeight: 600, color: 'white' }}>
              30 días de garantía
            </Typography>
          </Box>
        </Box>

        {/* Botón Anterior (izquierda) */}
        <IconButton
          onClick={carousel.arrows.onClickPrev}
          disabled={carousel.arrows.disablePrev}
          sx={{
            position: 'absolute',
            left: 16,
            top: '50%',
            transform: 'translateY(-50%)',
            width: 48,
            height: 48,
            bgcolor: 'white',
            boxShadow: 2,
            '&:hover': {
              bgcolor: 'white',
              boxShadow: 4,
            },
            '&:disabled': {
              opacity: 0.3,
            },
          }}
        >
          <Box
            component="svg"
            xmlns="http://www.w3.org/2000/svg"
            width="16px"
            height="13px"
            viewBox="0 0 16 13"
            fill="none"
            sx={{
              transform: 'rotate(-180deg)',
            }}
          >
            <path
              d="M0.750006 6.08333L14.9722 6.08333M14.9722 6.08333L9.6389 11.4167M14.9722 6.08333L9.6389 0.75"
              stroke="#7F746A"
              strokeWidth="1.5"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </Box>
        </IconButton>

        {/* Botón Siguiente (derecha) */}
        <IconButton
          onClick={carousel.arrows.onClickNext}
          disabled={carousel.arrows.disableNext}
          sx={{
            position: 'absolute',
            right: 16,
            top: '50%',
            transform: 'translateY(-50%)',
            width: 48,
            height: 48,
            bgcolor: 'white',
            boxShadow: 2,
            '&:hover': {
              bgcolor: 'white',
              boxShadow: 4,
            },
            '&:disabled': {
              opacity: 0.3,
            },
          }}
        >
          <Box
            component="svg"
            xmlns="http://www.w3.org/2000/svg"
            width="16px"
            height="13px"
            viewBox="0 0 16 13"
            fill="none"
          >
            <path
              d="M0.750006 6.08333L14.9722 6.08333M14.9722 6.08333L9.6389 11.4167M14.9722 6.08333L9.6389 0.75"
              stroke="#7F746A"
              strokeWidth="1.5"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </Box>
        </IconButton>

        {/* Dots indicadores abajo */}
        <Box
          sx={{
            position: 'absolute',
            bottom: 80,
            left: '50%',
            transform: 'translateX(-50%)',
            zIndex: 2,
          }}
        >
          <CarouselDotButtons
            variant="rounded"
            scrollSnaps={carousel.dots.scrollSnaps}
            selectedIndex={carousel.dots.selectedIndex}
            onClickDot={carousel.dots.onClickDot}
          />
        </Box>
      </Box>
    </Box>
  );
}
